<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Highway Crossing Frogs</title>
    <!--import CSS page here-->
    <!--<link type="text/css" rel="stylesheet" href="file name"/>-->

    <script language="javascript" type="text/javascript" src="javascript_code.js"></script>
</head>
<body>

    <div>
        <p id="score_area">SCORE: <span id="score">0</span> </p>
        <canvas id="myCanvas" width="800" height="600" style="border: 2px solid;">
        </canvas>
    </div>

    <script>
        var theCanvas = document.getElementById('myCanvas');
        var theContext = theCanvas.getContext('2d');

        window.onload = startGame();

        function startGame() {

//            var theCanvas = document.getElementById('myCanvas');
//            var theContext = theCanvas.getContext('2d');
            theContext.fillStyle = 'lightgray';                             // street color

            theContext.lineWidth = 5;
            theContext.strokeStyle = 'black';

//        var street = theContext.strokeRect(0,75,800,450);
//        theContext.fill(street);

            theContext.fillStyle = 'grey';
//        var car = theContext.fillRect(30,theCanvas.height/2,50,20);        // car/player
        }


        var Player = function() {
            this.x = 30;
            this.y = theCanvas.height / 2;
            this.width = 50;
            this.height = 20;
            this.travelDist = 8;
//            console.log("made new player object");
            keyPressed(this);
            this.update = function (keycode) {
//                console.log("update function with: " + keycode);

                theContext.clearRect(this.x, this.y, this.width, this.height);
//                console.log('cleared from update');

                switch (keycode) {
                    case 37:    // left
                        this.x -= this.travelDist;
                        break;
                    case 38:    // up
                        this.y -= this.travelDist;
                        break;
                    case 39:    // right
                        this.x += this.travelDist;
                        break;
                    case 40:    // down
                        this.y += this.travelDist;
                        break;
                }
                checkBoundaries(this);
                theContext.fillStyle = 'red';
                theContext.fillRect(this.x, this.y, this.width, this.height);
            };
            theContext.clear;
//            console.log('cleared during start');
            theContext.fillStyle = 'red';
            theContext.fillRect(this.x, this.y, this.width, this.height);
        };

        var Frog = function(x, y, spd) {
            this.x = x;
            this.y = y;
            this.spd = spd;
            this.xSpd = Math.random() * (this.spd - (-this.spd) + (-this.spd));
            this.ySpd = Math.random() * (this.spd - (-this.spd) + (-this.spd));
//            console.log("spd in arr: " + spd);
//            console.log("spds: " + this.xSpd + " " + this.ySpd);
            this.width = 20;
            this.height = 20;
            this.travelDist = 5;
            this.update = function () {
                theContext.clear;
                this.x = this.x + this.xSpd;
                this.y = this.y + this.ySpd;
//                checkBoundaries(this);
                theContext.fillStyle = 'green';
                theContext.fillRect(this.x, this.y, this.width, this.height);
            };
            theContext.fillStyle = 'green';
            theContext.fillRect(this.x, this.y, this.width, this.height);
        };

        var frogs = [];
        for (var i = 0; i < 1; i++) {
            frogs[i] = new Frog(
                // ** Math.random() * (max - min) + min **
                Math.random() * (790 - 400) + 400,
                Math.random() * (590 - 0) + 0,
                Math.floor(Math.random() * (3-1) + 1));


//            console.log("x: " + frogs[i].x + " y: " + frogs[i].y);
//            theContext.fillRect(frogs[i].x, frogs[i].y, frogs[i].width, frogs[i].height);
        }



        function keyPressed(player) {
            document.addEventListener('keydown', function(event) {
                player.update(event.keyCode)
            })
        }

        function checkBoundaries(player) {
            var badX, badY;
//            console.log("initial bools: " + badX + " " + badY);
            if (player.x < 0) {
                player.x = 0;
                badX = true;
            }
            else if ((player.x + player.width) >= theCanvas.width) {
                player.x = (theCanvas.width - player.width);
                badX = true;
            }

            if (badX == true && player.name == "Frog") { player.xSpd = -player.xSpd; }

            if (player.y < 0) {
                player.y = 0;
                badY = true;
            }
            else if ((player.y + player.height) >= theCanvas.height) {
                player.y = (theCanvas.height - player.height);
                badY = true;
            }
//            console.log("end bools: " + badX + " " + badY);
            if (badY == true && player.name == "Frog") { player.ySpd = -player.ySpd; }
        }


        var thePlayer = new Player();

        var draw = function() {
//            console.log("draw function reached");
//            theCanvas.clear;
            theContext.clear; //style.background(255,255,255);
            thePlayer.update();
            for (var i = 0; i < frogs.length; i++) {
                frogs[i].update();
            }
        };

        setInterval(draw,1000);

    </script>

</body>
</html>

<!--Helpful References:-->
<!--https://www.youtube.com/watch?v=Pzox_XTpoVU-->
<!--https://github.com/jmiguelsamper/html5-frogger/blob/master/js/core/Player.js-->
<!--http://stackoverflow.com/questions/1527803/generating-random-whole-numbers-in-javascript-in-a-specific-range-->